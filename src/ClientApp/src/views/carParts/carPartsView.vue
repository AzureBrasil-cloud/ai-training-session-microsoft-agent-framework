<script setup lang="ts">
import HelpButton from "@/components/common/HelpButton.vue";
import MultiAgentChatWindow from "@/components/agent/MultiAgentChatWindow.vue";

const videoUrl = `${window.location.origin}/videos/car-agent.mp4`;
</script>

<template>
  <HelpButton>
    <div class="d-flex justify-content-center my-4">
      <video
        ref="player"
        :src="videoUrl"
        controls
        loop
        autoplay
        muted
        playsinline
        style="width: 100%;"
      ></video>
    </div>

    <h2 class="mb-5 mt-8">
      <i class="bi bi-diagram-3 px-2"></i>
      Descritivo da PÃ¡gina do Multi-Agente Orquestrador de PeÃ§as
    </h2>
    <p>
      Esta pÃ¡gina apresenta um <strong>sistema de Multi-Agente Orquestrador</strong> que coordena automaticamente mÃºltiplos agentes especializados para fornecer informaÃ§Ãµes completas sobre peÃ§as automotivas. O orquestrador analisa a pergunta do usuÃ¡rio e delega a tarefa ao agente especializado mais adequado, utilizando o conceito de <strong>Agents as Tools</strong> e <strong>Model Context Protocol (MCP)</strong>.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-list-task px-2"></i> Funcionalidades
    </h5>
    <ul>
      <li><strong>Consulta de Produtos:</strong> Lista peÃ§as disponÃ­veis com cÃ³digo, nome, marca e modelo atravÃ©s do Agente de Produtos.</li>
      <li><strong>Consulta de PreÃ§os:</strong> Busca preÃ§o de peÃ§as especÃ­ficas por cÃ³digo atravÃ©s do Agente de PreÃ§os.</li>
      <li><strong>Consulta de Estoque:</strong> Verifica disponibilidade em estoque por cÃ³digo atravÃ©s do Agente de Estoque.</li>
      <li><strong>Roteamento Inteligente:</strong> Orquestrador analisa a intenÃ§Ã£o e delega automaticamente ao agente correto.</li>
      <li><strong>Interface Conversacional:</strong> Toda interaÃ§Ã£o via chat em linguagem natural.</li>
      <li><strong>Respostas Integradas:</strong> Combina informaÃ§Ãµes de mÃºltiplos agentes quando necessÃ¡rio.</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-robot px-2"></i> O que Ã© Multi-Agente Orquestrador?
    </h5>
    <p>
      Um <strong>Multi-Agente Orquestrador</strong> Ã© um agente coordenador que nÃ£o executa tarefas diretamente, mas sim delega trabalho a agentes especializados. Cada agente especializado possui suas prÃ³prias ferramentas (tools via MCP) e expertise em um domÃ­nio especÃ­fico.
    </p>

    <h6 class="mt-4 mb-2"><i class="bi bi-star px-2"></i> BenefÃ­cios da Arquitetura Multi-Agente:</h6>
    <ul>
      <li>âœ… <strong>SeparaÃ§Ã£o de Responsabilidades:</strong> Cada agente foca em uma Ã¡rea especÃ­fica (produtos, preÃ§os ou estoque)</li>
      <li>âœ… <strong>ReutilizaÃ§Ã£o:</strong> Agentes especializados podem ser usados individualmente ou em orquestraÃ§Ã£o</li>
      <li>âœ… <strong>Escalabilidade:</strong> FÃ¡cil adicionar novos agentes especializados sem alterar os existentes</li>
      <li>âœ… <strong>Manutenibilidade:</strong> MudanÃ§as em um domÃ­nio nÃ£o afetam outros agentes</li>
      <li>âœ… <strong>EspecializaÃ§Ã£o:</strong> Cada agente Ã© otimizado para sua tarefa especÃ­fica</li>
      <li>âœ… <strong>TransparÃªncia:</strong> UsuÃ¡rio nÃ£o precisa saber qual agente estÃ¡ sendo usado</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-diagram-3-fill px-2"></i> Arquitetura Multi-Agente
    </h5>
    <div class="bg-light p-4 rounded">
      <pre class="mb-0 text-dark" style="font-size: 0.85rem;"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       USUÃRIO           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ Pergunta em linguagem natural
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENTE ORQUESTRADOR    â”‚ (Analisa intenÃ§Ã£o e roteia)
â”‚  "Multi-Agente PeÃ§as"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Agente de  â”‚  â”‚  Agente de   â”‚  â”‚  Agente de   â”‚
    â”‚   Produtos   â”‚  â”‚    PreÃ§os    â”‚  â”‚   Estoque    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                  â”‚
           â”‚ MCP             â”‚ MCP              â”‚ MCP
           â–¼                 â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚CarProductMcp â”‚  â”‚ CarPriceMcp  â”‚  â”‚ CarStockMcp  â”‚
    â”‚  (Servidor)  â”‚  â”‚  (Servidor)  â”‚  â”‚  (Servidor)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
    </div>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-people px-2"></i> Agentes Especializados DisponÃ­veis
    </h5>

    <div class="card mb-3">
      <div class="card-body">
        <h6 class="card-title"><i class="bi bi-box-seam px-2"></i> 1. Agente de Produtos</h6>
        <p><strong>Responsabilidade:</strong> Consultar catÃ¡logo de peÃ§as automotivas</p>
        <p><strong>Tool MCP:</strong> GetAllProductsByParam (servidor CarProductMcp)</p>
        <p><strong>Retorna:</strong> CÃ³digo, nome, marca e modelo de produtos</p>
        <p class="mb-0"><strong>Exemplo:</strong> "Liste todos os produtos disponÃ­veis"</p>
      </div>
    </div>

    <div class="card mb-3">
      <div class="card-body">
        <h6 class="card-title"><i class="bi bi-tags px-2"></i> 2. Agente de PreÃ§os</h6>
        <p><strong>Responsabilidade:</strong> Consultar preÃ§os de peÃ§as por cÃ³digo</p>
        <p><strong>Tool MCP:</strong> GetPriceByProductCode (servidor CarPriceMcp)</p>
        <p><strong>Retorna:</strong> CÃ³digo do produto e valor/preÃ§o</p>
        <p class="mb-0"><strong>Exemplo:</strong> "Qual o preÃ§o do produto WB005?"</p>
      </div>
    </div>

    <div class="card mb-3">
      <div class="card-body">
        <h6 class="card-title"><i class="bi bi-boxes px-2"></i> 3. Agente de Estoque</h6>
        <p><strong>Responsabilidade:</strong> Verificar disponibilidade em estoque</p>
        <p><strong>Tool MCP:</strong> GetStockByProductCode (servidor CarStockMcp)</p>
        <p><strong>Retorna:</strong> CÃ³digo do produto e quantidade disponÃ­vel</p>
        <p class="mb-0"><strong>Exemplo:</strong> "Qual o estoque do cÃ³digo CM002?"</p>
      </div>
    </div>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-cpu px-2"></i> Como o Orquestrador Funciona
    </h5>
    <ol>
      <li class="mb-2">
        <strong>RecepÃ§Ã£o da Mensagem:</strong> UsuÃ¡rio envia uma pergunta em linguagem natural (ex: "qual o preÃ§o e estoque do produto WB005?").
      </li>
      <li class="mb-2">
        <strong>AnÃ¡lise de IntenÃ§Ã£o:</strong> O Agente Orquestrador analisa a mensagem e identifica quais domÃ­nios estÃ£o envolvidos (produtos, preÃ§os, estoque).
      </li>
      <li class="mb-2">
        <strong>SeleÃ§Ã£o do(s) Agente(s):</strong> Com base na anÃ¡lise, o orquestrador decide qual(is) agente(s) especializado(s) deve(m) ser acionado(s).
      </li>
      <li class="mb-2">
        <strong>DelegaÃ§Ã£o (Agents as Tools):</strong> O orquestrador "chama" o agente especializado como se fosse uma ferramenta, passando o contexto necessÃ¡rio.
      </li>
      <li class="mb-2">
        <strong>ExecuÃ§Ã£o Especializada:</strong> O agente especializado se conecta ao seu servidor MCP, executa a tool apropriada e retorna os dados estruturados.
      </li>
      <li class="mb-2">
        <strong>AgregaÃ§Ã£o de Respostas:</strong> Se mÃºltiplos agentes foram acionados, o orquestrador combina as respostas de forma coerente.
      </li>
      <li class="mb-2">
        <strong>Resposta ao UsuÃ¡rio:</strong> Mensagem formatada e integrada Ã© exibida no chat com todas as informaÃ§Ãµes solicitadas.
      </li>
    </ol>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-wrench px-2"></i> Conceito: Agents as Tools
    </h5>
    <p>
      <strong>Agents as Tools</strong> Ã© um padrÃ£o do Microsoft Agent Framework onde um agente pode ser tratado como uma ferramenta (tool) por outro agente. Isso permite:
    </p>
    <ul>
      <li><strong>ComposiÃ§Ã£o de Agentes:</strong> Agentes podem ser combinados hierarquicamente</li>
      <li><strong>AbstraÃ§Ã£o:</strong> Orquestrador nÃ£o precisa conhecer detalhes internos dos agentes especializados</li>
      <li><strong>ReutilizaÃ§Ã£o:</strong> Mesmos agentes especializados podem ser usados em diferentes orquestraÃ§Ãµes</li>
      <li><strong>ManutenÃ§Ã£o Independente:</strong> Cada agente pode evoluir separadamente</li>
    </ul>

    <p class="mt-3">
      <strong>DiferenÃ§a entre Handoff e Agents as Tools:</strong>
    </p>
    <ul>
      <li><strong>Handoff:</strong> Transfere completamente a conversa para outro agente (troca de controle)</li>
      <li><strong>Agents as Tools:</strong> Agente orquestrador mantÃ©m controle e usa outros agentes como ferramentas para obter informaÃ§Ãµes</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-gear px-2"></i> Exemplo de Fluxo Completo
    </h5>
    <div class="bg-light p-4 rounded">
      <p class="mb-2"><strong>Pergunta do UsuÃ¡rio:</strong> "Quero saber o preÃ§o e estoque do produto WB005"</p>
      <ol class="mb-0 text-dark">
        <li><strong>Orquestrador:</strong> Identifica que precisa de informaÃ§Ãµes de PreÃ§os E Estoque</li>
        <li><strong>DelegaÃ§Ã£o 1:</strong> Chama Agente de PreÃ§os como tool</li>
        <li><strong>Agente de PreÃ§os:</strong> Conecta ao CarPriceMcp â†’ GetPriceByProductCode("WB005") â†’ Retorna R$ 150,00</li>
        <li><strong>DelegaÃ§Ã£o 2:</strong> Chama Agente de Estoque como tool</li>
        <li><strong>Agente de Estoque:</strong> Conecta ao CarStockMcp â†’ GetStockByProductCode("WB005") â†’ Retorna 23 unidades</li>
        <li><strong>Orquestrador:</strong> Combina respostas e formata para o usuÃ¡rio</li>
        <li><strong>Resposta Final:</strong> "Produto WB005: PreÃ§o R$ 150,00 | Estoque: 23 unidades disponÃ­veis"</li>
      </ol>
    </div>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-lightning-charge px-2"></i> Vantagens desta Arquitetura
    </h5>
    <ul>
      <li>âœ… <strong>ExperiÃªncia Unificada:</strong> UsuÃ¡rio nÃ£o precisa saber qual agente acionar</li>
      <li>âœ… <strong>InteligÃªncia de Roteamento:</strong> Orquestrador escolhe automaticamente o melhor agente</li>
      <li>âœ… <strong>Respostas Completas:</strong> Pode combinar informaÃ§Ãµes de mÃºltiplos domÃ­nios</li>
      <li>âœ… <strong>Modularidade:</strong> FÃ¡cil adicionar ou remover agentes especializados</li>
      <li>âœ… <strong>EficiÃªncia:</strong> Cada agente se conecta apenas ao MCP necessÃ¡rio</li>
      <li>âœ… <strong>ManutenÃ§Ã£o Simplificada:</strong> MudanÃ§as em um domÃ­nio sÃ£o isoladas</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-gear px-2"></i> PersonalizaÃ§Ã£o
    </h5>
    <p>
      O sistema permite personalizar tanto o <strong>Agente Orquestrador</strong> quanto cada <strong>Agente Especializado</strong> atravÃ©s do botÃ£o "InstruÃ§Ãµes":
    </p>
    <ul>
      <li><strong>Orquestrador:</strong> Ajustar lÃ³gica de roteamento e priorizaÃ§Ã£o de agentes</li>
      <li><strong>Agentes Especializados:</strong> Personalizar tom, formato e comportamento de cada agente</li>
      <li><strong>AdiÃ§Ã£o de Agentes:</strong> Incluir novos agentes especializados na orquestraÃ§Ã£o</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-bullseye px-2"></i> Objetivo
    </h5>
    <p>
      O objetivo deste Multi-Agente Orquestrador Ã© <strong>fornecer uma experiÃªncia unificada e inteligente para consulta de peÃ§as automotivas</strong>, combinando automaticamente informaÃ§Ãµes de produtos, preÃ§os e estoque atravÃ©s de uma Ãºnica interface conversacional, eliminando a necessidade do usuÃ¡rio navegar entre diferentes sistemas ou agentes.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-link-45deg px-2"></i> Links Ãšteis
    </h5>
    <ul>
      <li>
        <a href="https://learn.microsoft.com/pt-br/agent-framework/overview/agent-framework-overview" target="_blank" rel="noopener">
          VisÃ£o Geral do Microsoft Agent Framework
        </a>
      </li>
      <li>
        <a href="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/agent-as-function-tool?pivots=programming-language-csharp" target="_blank" rel="noopener">
          AI Agents as Tools - Microsoft Agent Framework
        </a>
      </li>
      <li>
        <a href="https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/orchestrations/handoff?pivots=programming-language-csharp#differences-between-handoff-and-agent-as-tools" target="_blank" rel="noopener">
          Handoff vs Agents as Tools - DiferenÃ§as e Casos de Uso
        </a>
      </li>
      <li>
        <a href="https://modelcontextprotocol.io/introduction" target="_blank" rel="noopener">
          Model Context Protocol - DocumentaÃ§Ã£o Oficial
        </a>
      </li>
    </ul>
  </HelpButton>

  <MultiAgentChatWindow
  :feature-id="5"
  title="Multi-Agente Orquestrador de PeÃ§as"
  welcome-message="ğŸ‘‹ OlÃ¡! Sou o Multi-Agente Orquestrador de PeÃ§as. Coordeno agentes especializados para fornecer informaÃ§Ãµes completas sobre produtos, preÃ§os e estoque. Como posso ajudÃ¡-lo?"
  default-orchestrator-name="Orquestrador de PeÃ§as Automotivas"
  default-orchestrator-instructions="VocÃª Ã© o Agente Orquestrador de PeÃ§as Automotivas da Contoso AutoTech, responsÃ¡vel por coordenar agentes especializados em produtos, preÃ§os e estoque.

RESPONSABILIDADES:
- Analisar a pergunta do usuÃ¡rio e identificar qual(is) domÃ­nio(s) estÃ¡(Ã£o) envolvido(s)
- Delegar tarefas aos agentes especializados apropriados usando Agents as Tools
- Combinar e apresentar respostas de mÃºltiplos agentes de forma coerente e organizada
- NUNCA tentar responder diretamente - SEMPRE delegar aos agentes especializados

REGRAS DE ROTEAMENTO:
1. Perguntas sobre **catÃ¡logo, lista de produtos, peÃ§as disponÃ­veis** â†’ Agente de Produtos
2. Perguntas sobre **preÃ§o, valor, custo** â†’ Agente de Precos
3. Perguntas sobre **estoque, disponibilidade, quantidade** â†’ Agente de Estoque
4. Perguntas que envolvem mÃºltiplos domÃ­nios â†’ Acionar mÃºltiplos agentes e combinar respostas

FORMATO DE RESPOSTA:
- Sempre mencionar qual(is) agente(s) foi(ram) acionado(s)
- Apresentar informaÃ§Ãµes de forma clara e estruturada
- Se cÃ³digo do produto nÃ£o for fornecido, solicitar ao usuÃ¡rio
- Responder SEMPRE em portuguÃªs brasileiro

Mantenha tom profissional, cordial e eficiente. Priorize a experiÃªncia do usuÃ¡rio combinando informaÃ§Ãµes relevantes."
  :default-specialized-agents="[
    {
      name: 'Agente de Produtos',
      instructions: 'VocÃª Ã© um assistente virtual especializado em catÃ¡logo de produtos automotivos da Contoso AutoTech.\n\nRESPONSABILIDADES:\n- Auxiliar na consulta de produtos do catÃ¡logo\n- Utilizar exclusivamente as ferramentas MCP disponÃ­veis\n- Fornecer respostas claras com cÃ³digo, nome, marca e modelo\n- Manter tom profissional e cordial\n\nFERRAMENTAS DISPONÃVEIS:\n- GetAllProductsByParam: Para consultar produtos por nome ou cÃ³digo\n\nResponda sempre de maneira profissional, clara e organizada.',
      featureId: 9
    },
    {
      name: 'Agente de Precos',
      instructions: 'VocÃª Ã© um assistente virtual especializado em consulta de preÃ§os de peÃ§as automotivas da Contoso AutoTech.\n\nRESPONSABILIDADES:\n- Auxiliar na consulta de preÃ§os atravÃ©s do cÃ³digo do produto\n- Utilizar exclusivamente a ferramenta MCP disponÃ­vel\n- Fornecer respostas claras com cÃ³digo e preÃ§o formatado (R$)\n- Solicitar cÃ³digo se nÃ£o fornecido\n\nFERRAMENTAS DISPONÃVEIS:\n- GetPriceByProductCode: Para consultar preÃ§o por cÃ³digo (parÃ¢metro obrigatÃ³rio: code)\n\nResponda sempre de maneira profissional, clara e organizada.',
      featureId: 3
    },
    {
      name: 'Agente de Estoque',
      instructions: 'VocÃª Ã© um assistente virtual especializado em consulta de estoque de peÃ§as automotivas da Contoso AutoTech.\n\nRESPONSABILIDADES:\n- Auxiliar na consulta de estoque atravÃ©s do cÃ³digo do produto\n- Utilizar exclusivamente a ferramenta MCP disponÃ­vel\n- Fornecer respostas claras com cÃ³digo e quantidade disponÃ­vel\n- Alertar se estoque baixo (menos de 5 unidades)\n- Solicitar cÃ³digo se nÃ£o fornecido\n\nFERRAMENTAS DISPONÃVEIS:\n- GetStockByProductCode: Para consultar quantidade em estoque (parÃ¢metro obrigatÃ³rio: code)\n\nResponda sempre de maneira profissional, clara e organizada.',
      featureId: 4
    }
  ]"
>
  <template #icon>
    <i class="bi bi-diagram-3 px-3"></i>
  </template>
</MultiAgentChatWindow>
</template>
