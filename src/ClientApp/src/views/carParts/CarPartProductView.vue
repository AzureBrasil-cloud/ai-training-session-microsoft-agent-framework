<script setup lang="ts">
import HelpButton from "@/components/common/HelpButton.vue";
import AgentChatWindow from "@/components/agent/AgentChatWindow.vue";

const carPartProductImage = `${window.location.origin}/images/Feature3.png`;
</script>

<template>
  <HelpButton>
    <div class="d-flex justify-content-center my-4">
      <img
        :src="carPartProductImage"
        alt="Agente de CatÃ¡logo de Produtos"
        class="img-fluid rounded"
        style="width: 100%; max-width: 800px;"
      />
    </div>

    <h2 class="mb-5 mt-8">
      <i class="bi bi-box-seam px-2"></i>
      Descritivo da PÃ¡gina do Agente de CatÃ¡logo de Produtos
    </h2>
    <p>
      Esta pÃ¡gina apresenta um <strong>assistente virtual especializado em consulta de produtos automotivos</strong>.
      Ele permite ao usuÃ¡rio buscar informaÃ§Ãµes de produtos utilizando o <strong>Model Context Protocol (MCP)</strong>,
      um protocolo aberto que conecta agentes de IA a sistemas externos de forma padronizada e eficiente.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-list-task px-2"></i> Funcionalidades
    </h5>
    <ul>
      <li><strong>Consulta de Produtos:</strong> Lista produtos automotivos com nome, marca, modelo, categoria e preÃ§o.</li>
      <li><strong>Interface Conversacional:</strong> Toda interaÃ§Ã£o via chat em linguagem natural.</li>
      <li><strong>IntegraÃ§Ã£o MCP:</strong> Conecta-se a servidor MCP externo para obter dados em tempo real.</li>
      <li><strong>Gerenciamento de Threads:</strong> MantÃ©m histÃ³rico de conversas organizadas.</li>
      <li><strong>Respostas Estruturadas:</strong> InformaÃ§Ãµes formatadas de forma clara e organizada.</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-diagram-2 px-2"></i> O que Ã© MCP (Model Context Protocol)?
    </h5>
    <p>
      O <strong>Model Context Protocol (MCP)</strong> Ã© um protocolo aberto desenvolvido pela Anthropic que padroniza como agentes de IA se conectam a diferentes fontes de dados e ferramentas. Ele resolve o problema de integraÃ§Ã£o fragmentada, permitindo que um agente converse com mÃºltiplos sistemas externos atravÃ©s de uma interface unificada.
    </p>

    <h6 class="mt-4 mb-2"><i class="bi bi-star px-2"></i> CaracterÃ­sticas Principais do MCP:</h6>
    <ul>
      <li>âœ… <strong>Protocolo Aberto:</strong> PadrÃ£o livre e extensÃ­vel para integraÃ§Ãµes de IA</li>
      <li>âœ… <strong>Cliente-Servidor:</strong> Arquitetura que separa o agente (cliente) dos dados (servidor)</li>
      <li>âœ… <strong>AgnÃ³stico de Transporte:</strong> Pode usar HTTP, WebSockets, stdio, ou outros protocolos</li>
      <li>âœ… <strong>Descoberta DinÃ¢mica:</strong> Servidores expÃµem suas capacidades (tools, resources, prompts) dinamicamente</li>
      <li>âœ… <strong>SeguranÃ§a:</strong> Controle granular de permissÃµes e acesso a recursos</li>
      <li>âœ… <strong>ReutilizÃ¡vel:</strong> Um servidor MCP pode ser usado por mÃºltiplos agentes diferentes</li>
    </ul>

    <h6 class="mt-4 mb-2"><i class="bi bi-diagram-3 px-2"></i> Arquitetura MCP:</h6>
    <div class="bg-light p-4 rounded">
      <pre class="mb-0 text-dark" style="font-size: 0.9rem;"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Agent      â”‚ (Cliente MCP - este agente de produtos)
â”‚  (Cliente MCP)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Protocolo MCP
         â”‚ (JSON-RPC)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Servidor MCP   â”‚ (CarPartProductMcp - servidor .NET)
â”‚   (Produtos)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Base de Dados  â”‚ (SQL Server / SQLite)
â”‚    Produtos     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
    </div>

    <p class="mt-4">
      <strong>Servidor MCP:</strong> Este agente conecta-se ao <strong>CarPartProductMcp</strong>, um servidor MCP implementado em .NET que expÃµe ferramentas para consulta de produtos automotivos.
    </p>

    <p>
      <strong>ConfiguraÃ§Ã£o:</strong> A URL do servidor Ã© definida no <code>appsettings.json</code>:
    </p>
    <pre class="bg-light p-3 rounded" style="font-size: 0.85rem;"><code class="text-dark">{
  "Application": {
    "CarProductMcpRemoteUrl": "https://app-cars-product-mcp-...azurewebsites.net/mcp"
  }
}</code></pre>

    <p>
      A conexÃ£o Ã© estabelecida via <strong>SSE (Server-Sent Events)</strong>, permitindo comunicaÃ§Ã£o persistente e bidirecional eficiente entre o agente e o servidor MCP.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-tools px-2"></i> Ferramentas (Tools) DisponÃ­veis via MCP
    </h5>
    <p>
      O servidor MCP expÃµe <strong>1 tool principal</strong> que o agente pode invocar durante a conversa:
    </p>

    <div class="card mb-3">
      <div class="card-body">
        <h6 class="card-title"><i class="bi bi-search px-2"></i> GetAllProductsByParam</h6>
        <p class="card-text">
          <strong>DescriÃ§Ã£o:</strong> Retorna uma lista de produtos automotivos filtrados por nome ou cÃ³digo. Se nenhum filtro for fornecido, retorna todos os produtos disponÃ­veis no catÃ¡logo.
        </p>
        <p><strong>ParÃ¢metros (todos opcionais):</strong></p>
        <ul class="mb-2">
          <li><code>name</code> (string, opcional) - Filtro por nome do produto (busca parcial, case-insensitive)</li>
          <li><code>code</code> (string, opcional) - Filtro por cÃ³digo do produto (busca parcial, case-insensitive)</li>
        </ul>
        <p><strong>Retorno:</strong> Lista de objetos Product contendo:</p>
        <ul class="mb-2">
          <li><code>id</code> (Guid) - Identificador Ãºnico do produto</li>
          <li><code>productCode</code> (string) - CÃ³digo do produto</li>
          <li><code>name</code> (string) - Nome do produto</li>
          <li><code>brand</code> (string) - Marca do produto</li>
          <li><code>model</code> (string) - Modelo compatÃ­vel</li>
        </ul>
        <p class="mb-0"><strong>Exemplos de Uso:</strong> "Liste todos os produtos disponÃ­veis", "Buscar produtos com nome 'freio'", "Produtos com cÃ³digo 'BRK'"</p>
      </div>
    </div>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-cpu px-2"></i> Como o Agente Funciona
    </h5>
    <ol>
      <li class="mb-2">
        <strong>ConexÃ£o com MCP:</strong> Ao iniciar, o agente estabelece conexÃ£o SSE com o servidor CarPartProductMcp e descobre as tools disponÃ­veis (GetAllProductsByParam).
      </li>
      <li class="mb-2">
        <strong>RecepÃ§Ã£o da Mensagem:</strong> UsuÃ¡rio envia uma pergunta em linguagem natural (ex: "quero ver os produtos", "buscar produtos com nome freio").
      </li>
      <li class="mb-2">
        <strong>AnÃ¡lise e DecisÃ£o:</strong> O LLM analisa a intenÃ§Ã£o e decide chamar a tool GetAllProductsByParam via protocolo MCP, identificando os parÃ¢metros necessÃ¡rios (name e/ou code).
      </li>
      <li class="mb-2">
        <strong>Chamada MCP:</strong> Agente envia requisiÃ§Ã£o JSON-RPC ao servidor MCP solicitando execuÃ§Ã£o da tool com os parÃ¢metros apropriados.
      </li>
      <li class="mb-2">
        <strong>ExecuÃ§Ã£o no Servidor:</strong> Servidor MCP executa GetAllProductsByParam, aplica os filtros (se fornecidos), consulta o banco de dados e retorna os dados.
      </li>
      <li class="mb-2">
        <strong>Processamento:</strong> Agente recebe os dados estruturados do MCP e o LLM formata a resposta em linguagem natural.
      </li>
      <li class="mb-2">
        <strong>Resposta ao UsuÃ¡rio:</strong> Mensagem formatada Ã© exibida no chat com a lista de produtos encontrados.
      </li>
    </ol>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-lightning-charge px-2"></i> Vantagens da Arquitetura MCP
    </h5>
    <ul>
      <li>âœ… <strong>SeparaÃ§Ã£o de Responsabilidades:</strong> Agente foca em conversaÃ§Ã£o, servidor MCP em acesso a dados</li>
      <li>âœ… <strong>Escalabilidade:</strong> Servidor MCP pode atender mÃºltiplos agentes simultaneamente</li>
      <li>âœ… <strong>Manutenibilidade:</strong> MudanÃ§as na fonte de dados nÃ£o afetam a lÃ³gica do agente</li>
      <li>âœ… <strong>SeguranÃ§a:</strong> Servidor MCP controla acesso aos dados sem expor credenciais ao agente</li>
      <li>âœ… <strong>ReutilizaÃ§Ã£o:</strong> Mesmo servidor pode ser usado por diferentes aplicaÃ§Ãµes</li>
      <li>âœ… <strong>PadronizaÃ§Ã£o:</strong> Protocolo comum facilita integraÃ§Ãµes futuras</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-gear px-2"></i> PersonalizaÃ§Ã£o
    </h5>
    <p>
      O agente permite ajustar suas instruÃ§Ãµes atravÃ©s do botÃ£o <strong>"InstruÃ§Ãµes"</strong>, possibilitando:
    </p>
    <ul>
      <li>Alterar o tom e estilo de resposta</li>
      <li>Adicionar contexto especÃ­fico de negÃ³cio</li>
      <li>Personalizar formataÃ§Ã£o das respostas</li>
      <li>Definir comportamentos especÃ­ficos para diferentes cenÃ¡rios</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-bullseye px-2"></i> Objetivo
    </h5>
    <p>
      O objetivo deste agente Ã© <strong>democratizar o acesso ao catÃ¡logo de produtos automotivos</strong>, permitindo consultas em linguagem natural sem necessidade de conhecer SQL, APIs ou estruturas de dados complexas. O uso de MCP garante que o sistema seja extensÃ­vel e fÃ¡cil de manter.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h">
      <i class="bi bi-link-45deg px-2"></i> Links Ãšteis
    </h5>
     <ul>
      <li>
        <a href="https://learn.microsoft.com/pt-br/agent-framework/overview/agent-framework-overview" target="_blank" rel="noopener">
          VisÃ£o Geral do Microsoft Agent Framework
        </a>
      </li>
      <li>
        <a href="https://modelcontextprotocol.io/introduction" target="_blank" rel="noopener">
          Model Context Protocol - DocumentaÃ§Ã£o Oficial
        </a>
      </li>
      <li>
        <a href="https://github.com/modelcontextprotocol" target="_blank" rel="noopener">
          MCP GitHub Repository
        </a>
      </li>
      <li>
        <a href="https://www.azurebrasil.cloud/blog/desvendando-o-model-context-protocol-mcp/" target="_blank" rel="noopener">
          Desvendando o Model Context Protocol (MCP) - Azure Brasil
        </a>
      </li>
    </ul>
  </HelpButton>

  <AgentChatWindow
    :feature-id="9"
    title="Agente de CatÃ¡logo de PeÃ§as de Carros"
    welcome-message="ğŸ‘‹ OlÃ¡! Sou o Agente de CatÃ¡logo de PeÃ§as Automotivas. Posso ajudÃ¡-lo a consultar e localizar produtos em nosso catÃ¡logo. Como posso auxiliÃ¡-lo hoje?"
    default-agent-name="Agente de CatÃ¡logo de Produtos"
    default-instructions="VocÃª Ã© um assistente virtual especializado em catÃ¡logo de produtos automotivos da Contoso AutoTech.

RESPONSABILIDADES:
- Auxiliar clientes na consulta de produtos do catÃ¡logo
- Utilizar exclusivamente as ferramentas MCP disponÃ­veis para obter informaÃ§Ãµes precisas
- Fornecer respostas claras, organizadas e objetivas
- Manter um tom profissional, cordial e prestativo

DIRETRIZES DE COMUNICAÃ‡ÃƒO:
1. Sempre confirme o entendimento da solicitaÃ§Ã£o do cliente antes de executar buscas
2. Apresente os resultados de forma estruturada e fÃ¡cil de ler
3. Inclua informaÃ§Ãµes relevantes como cÃ³digo, nome, marca e modelo dos produtos
4. Se nenhum produto for encontrado, informe claramente e sugira alternativas de busca
5. Mantenha o foco apenas em produtos disponÃ­veis no catÃ¡logo

Responda sempre de maneira profissional, clara e organizada, priorizando a experiÃªncia do cliente."
  >
    <template #icon>
      <i class="bi bi-tools px-3"></i>
    </template>
  </AgentChatWindow>
</template>
