<script setup lang="ts">
import HelpButton from "@/components/common/HelpButton.vue";
import AgentChatWindow from "@/components/agent/AgentChatWindow.vue";

const customerPoliciesImage = `${window.location.origin}/images/Feature2.png`;
</script>

<template>
  <HelpButton>
    <div class="d-flex justify-content-center my-4">
      <img
        :src="customerPoliciesImage"
        alt="Assistente de Pol√≠ticas de Relacionamento"
        class="img-fluid rounded"
        style="width: 100%; max-width: 800px;"
      />
    </div>

    <h2 class="mb-5 mt-8"><i class="bi bi-shield-check px-2"></i> Descritivo da P√°gina de Pol√≠ticas de Relacionamento com o Cliente</h2>
    <p>
      Esta p√°gina apresenta um <strong>assistente virtual especializado em pol√≠ticas de relacionamento com o cliente</strong>. Ele auxilia usu√°rios e equipes a consultar, esclarecer d√∫vidas e obter orienta√ß√µes sobre as pol√≠ticas de atendimento, garantias, trocas, devolu√ß√µes e demais diretrizes de relacionamento da empresa.
    </p>
    <p>
      <strong>üîê Consulta de Documentos Privados:</strong> Este agente utiliza <strong>RAG (Retrieval Augmented Generation)</strong> para consultar e extrair informa√ß√µes de documentos privados da empresa, como manuais de pol√≠ticas internas, regulamentos e diretrizes confidenciais, garantindo respostas precisas e baseadas em fontes oficiais.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h"><i class="bi bi-list-task px-2"></i> Funcionalidades</h5>
    <ul>
      <li><strong>Consulta de Pol√≠ticas:</strong> O assistente fornece informa√ß√µes sobre pol√≠ticas de atendimento, garantias e trocas.</li>
      <li><strong>Esclarecimento de D√∫vidas:</strong> Responde quest√µes sobre direitos do cliente e procedimentos.</li>
      <li><strong>Orienta√ß√£o de Processos:</strong> Guia sobre como proceder em casos de reclama√ß√µes, devolu√ß√µes ou solicita√ß√µes especiais.</li>
      <li><strong>Interface Conversacional:</strong> Toda intera√ß√£o via chat em linguagem natural.</li>
      <li><strong>Gerenciamento de Threads:</strong> Mant√©m hist√≥rico de conversas organizadas em threads.</li>
    </ul>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h"><i class="bi bi-gear px-2"></i> Personaliza√ß√£o</h5>
    <p>
      O agente permite personalizar suas instru√ß√µes e comportamento atrav√©s do bot√£o "Instru√ß√µes", possibilitando ajustar o contexto e a forma como ele interage com o usu√°rio.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h"><i class="bi bi-database px-2"></i> Abordagens de Recupera√ß√£o de Dados</h5>
    <p>
      Este agente pode operar em <strong>dois modos diferentes</strong> de recupera√ß√£o de informa√ß√µes, controlados pela configura√ß√£o <code>UseBasicCustomerPoliciesAgentContext</code> no <code>appsettings.json</code>:
    </p>

    <h6 class="mt-4 mb-2"><i class="bi bi-1-circle px-2"></i> Modo B√°sico (UseBasicCustomerPoliciesAgentContext = true)</h6>
    <p>
      Utiliza o <strong>TextSearchProvider</strong> com dados est√°ticos predefinidos no c√≥digo. Neste modo, o agente consulta um conjunto fixo de snippets de texto que simulam documentos de pol√≠ticas.
    </p>
    <p><strong>Dados consultados (est√°ticos):</strong></p>
    <ul>
      <li><strong>Pol√≠tica de Devolu√ß√µes e Reembolsos:</strong> Informa√ß√µes sobre prazos de devolu√ß√£o (30 dias para produtos, 7 dias para servi√ßos), condi√ß√µes de reembolso e procedimentos de inspe√ß√£o.</li>
      <li><strong>Pol√≠tica de Garantia:</strong> Detalhes sobre garantia de 12 meses para pe√ßas, 90 dias para servi√ßos, e exclus√µes de garantia.</li>
      <li><strong>Pol√≠tica de Atendimento:</strong> Hor√°rios de funcionamento, canais de atendimento, tempos de resposta e procedimentos de reclama√ß√£o.</li>
    </ul>
    <p>
      <strong>Vantagens:</strong> Simples, r√°pido, sem depend√™ncias externas. <br>
      <strong>Limita√ß√µes:</strong> Dados limitados e n√£o atualiz√°veis sem altera√ß√£o de c√≥digo.
    </p>

    <h6 class="mt-4 mb-2"><i class="bi bi-2-circle px-2"></i> Modo Avan√ßado - Agentic Retrieval (UseBasicCustomerPoliciesAgentContext = false)</h6>
    <p>
      Utiliza o <strong>Azure AI Search Knowledge Agent</strong> com a tecnologia de <strong>Agentic Retrieval</strong>, uma pipeline multi-query avan√ßada projetada para perguntas complexas em aplica√ß√µes RAG.
    </p>

    <p><strong>Documentos indexados no Azure AI Search:</strong></p>
    <ul>
      <li><code>Politica_de_Relacionamento_ContosoAutoTech.pdf</code></li>
      <li><code>Politica_de_Troca_Devolucao_Reembolso_ContosoAutoTech.pdf</code></li>
      <li><code>Politica_de_Venda_ContosoAutoTech.pdf</code></li>
    </ul>

    <p><strong>Como funciona o Agentic Retrieval:</strong></p>
    <ol>
      <li><strong>An√°lise Inteligente:</strong> Um LLM analisa a pergunta complexa e o hist√≥rico do chat para identificar a real necessidade de informa√ß√£o.</li>
      <li><strong>Decomposi√ß√£o de Queries:</strong> Quebra perguntas compostas em subqueries focadas. Ex: "qual o prazo de devolu√ß√£o e como funciona o reembolso?" ‚Üí 2 subqueries espec√≠ficas.</li>
      <li><strong>Execu√ß√£o Paralela:</strong> Todas as subqueries s√£o executadas simultaneamente (busca h√≠brida: keyword + vetorial).</li>
      <li><strong>Reranking Sem√¢ntico:</strong> Cada subquery √© semanticamente rerankeada para promover os matches mais relevantes.</li>
      <li><strong>S√≠ntese Unificada:</strong> Combina os melhores resultados em uma resposta unificada com:
        <ul>
          <li>Conte√∫do mesclado (grounding data)</li>
          <li>Refer√™ncias das fontes (para cita√ß√£o)</li>
          <li>Detalhes de execu√ß√£o (plano de query)</li>
        </ul>
      </li>
    </ol>

    <p><strong>Recursos Avan√ßados:</strong></p>
    <ul>
      <li>‚úÖ L√™ hist√≥rico do chat como entrada</li>
      <li>‚úÖ Deconstr√≥i queries complexas com m√∫ltiplas "perguntas"</li>
      <li>‚úÖ Reescreve queries usando par√°frase gerada por LLM</li>
      <li>‚úÖ Corrige erros ortogr√°ficos automaticamente</li>
      <li>‚úÖ Suporta mapas de sin√¥nimos (opcional)</li>
      <li>‚úÖ Busca h√≠brida (texto + vetores) com ranking sem√¢ntico</li>
    </ul>

    <p>
      <strong>Vantagens:</strong> Respostas muito mais precisas, suporte a perguntas complexas, documentos reais e atualiz√°veis, cita√ß√£o de fontes. <br>
      <strong>Trade-off:</strong> Maior lat√™ncia devido √† invoca√ß√£o do LLM no planejamento de queries (mitigado com modelos r√°pidos como gpt-4o-mini).
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h"><i class="bi bi-bullseye px-2"></i> Objetivo</h5>
    <p>
      O objetivo deste agente √© <strong>facilitar o acesso e compreens√£o das pol√≠ticas de relacionamento com o cliente</strong>, oferecendo respostas r√°pidas e precisas que melhoram a experi√™ncia do cliente e agilizam o trabalho das equipes de atendimento.
    </p>

    <h5 class="mt-6 mb-3 bg-gray-100 p-2 rounded bck-h"><i class="bi bi-link-45deg px-2"></i> Links √öteis</h5>
    <ul>
      <li>
        <a href="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/memory?pivots=programming-language-csharp" target="_blank" rel="noopener">
          Agent Memory - Gerenciamento de Mem√≥ria em Agentes
        </a>
      </li>
      <li>
        <a href="https://learn.microsoft.com/en-au/azure/search/agentic-retrieval-overview" target="_blank" rel="noopener">
          Agentic Retrieval Overview - Azure AI Search
        </a>
      </li>
    </ul>
  </HelpButton>

  <AgentChatWindow
    :feature-id="2"
    title="Assistente de Pol√≠ticas de Relacionamento"
    welcome-message="üëã Ol√°! Sou o Agente de Pol√≠ticas de Relacionamento com o Cliente. Como posso ajudar voc√™ hoje? Posso esclarecer d√∫vidas sobre pol√≠ticas de atendimento, garantias, trocas e devolu√ß√µes."
    default-agent-name="Agente de Pol√≠ticas de Relacionamento"
    default-instructions="
Voc√™ √© um assistente especializado em pol√≠ticas internas de relacionamento com o cliente da Contoso AutoTech.
Seu objetivo √© responder perguntas exclusivamente com base nos documentos privados fornecidos no contexto.

---

### Regras Principais

#### 1. Uso estrito das fontes

* Utilize apenas informa√ß√µes que estejam explicitamente presentes nos documentos oficiais.
* Nunca invente, presuma ou deduza informa√ß√µes que n√£o estejam escritas nos textos fornecidos.

#### 2. Quando a informa√ß√£o n√£o existir

Se a pergunta n√£o puder ser respondida com base nos documentos dispon√≠veis, a resposta deve ser exatamente:

‚ÄúN√£o encontrei essa informa√ß√£o nas pol√≠ticas dispon√≠veis. Posso ajud√°-lo com informa√ß√µes sobre: pol√≠ticas de atendimento, garantias, trocas e devolu√ß√µes.‚Äù

#### 3. Estilo e formato das respostas

* Seja claro, objetivo e direto.
* Use somente trechos e informa√ß√µes dos documentos.
* N√£o oculte, altere o sentido ou resuma de forma imprecisa.
* N√£o utilize express√µes como ‚ÄúLeia mais‚Äù ou similares.
* Organize a resposta de forma simples e f√°cil de entender, com t√≠tulos e listas quando necess√°rio.
* Ao final de cada resposta, inclua sempre a se√ß√£o:

  * Fontes consultadas: listar exatamente os documentos utilizados.

---

### Prop√≥sito do agente

Este agente foi projetado para atuar como um consultor seguro de informa√ß√µes privadas, garantindo respostas fi√©is √†s pol√≠ticas internas, uso rigoroso das fontes e completa elimina√ß√£o de conte√∫do fora das diretrizes corporativas.
"
  >
    <template #icon>
      <i class="bi bi-shield-check px-3"></i>
    </template>
  </AgentChatWindow>
</template>

